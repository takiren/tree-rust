# tree-rust CUIツール開発計画

## プロジェクト概要

tree-rustは、現在のディレクトリから指定した階層までをツリー形式で表示するRust製のコマンドラインツールです。

## 機能要件

### 基本機能
- ディレクトリとファイルの階層構造をツリー形式で表示
- 指定した深さまでの制限表示
- 起点ディレクトリの指定（デフォルト: 現在のディレクトリ）

### コマンドライン仕様
```bash
tree-rust [OPTIONS] [PATH]
```

#### 引数
- `PATH`: 起点となるディレクトリパス（省略時は現在のディレクトリ）

#### オプション
- `--depth <NUM>` または `-d <NUM>`: 表示する階層の深さ（デフォルト: 無制限）
- `--files-only` または `-f`: ファイルのみ表示
- `--dirs-only` または `-D`: ディレクトリのみ表示
- `--help` または `-h`: ヘルプ表示

### 出力形式例
```
project/
├── src/
│   ├── main.rs
│   ├── lib.rs
│   └── tree.rs
├── tests/
│   └── integration_test.rs
├── Cargo.toml
└── README.md
```

## 技術仕様

### 使用技術
- **言語**: Rust
- **主要クレート**:
  - `clap`: コマンドライン引数解析
  - `std::fs`: ファイルシステム操作
  - `std::path`: パス操作

### プロジェクト構造
```
tree-rust/
├── src/
│   ├── main.rs        # エントリーポイント
│   ├── lib.rs         # ライブラリ定義
│   ├── tree.rs        # ツリー表示ロジック
│   └── args.rs        # コマンドライン引数処理
├── tests/
│   └── integration_tests.rs
├── docs/
│   └── plan.md        # 本ドキュメント
├── Cargo.toml
├── CLAUDE.md
└── README.md
```

## 実装計画

### Phase 1: プロジェクト初期化
- [x] 要件定義とツール仕様の策定
- [x] Rustプロジェクトの初期化
- [x] 基本的なプロジェクト構造の作成

### Phase 2: コア機能実装
- [x] ディレクトリ走査機能の実装
- [x] ツリー形式表示ロジックの実装
- [x] 階層深度制限機能の実装

### Phase 3: インターフェース実装
- [x] コマンドライン引数処理の実装
- [x] フィルタ機能（ファイル/ディレクトリのみ）の実装
- [x] ヘルプ表示機能の実装

### Phase 4: 品質向上
- [ ] エラーハンドリングの実装
- [ ] 統合テストの追加
- [ ] ドキュメント整備

## エラーハンドリング要件

以下のエラーケースに対して適切なメッセージを表示する:
- 存在しないパスが指定された場合
- アクセス権限がない場合
- 無効な深さ値が指定された場合
- その他のI/Oエラー

## テスト要件

- 基本的なディレクトリ構造での動作確認
- 深度制限機能のテスト
- フィルタ機能のテスト
- エラーケースのテスト
- パフォーマンステスト（大規模ディレクトリ）